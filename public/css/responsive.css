/* Mobile Styles */
@media (max-width: 768px) {
    /* Sidebar adjustments */
    .sidebar {
        width: 280px;
        left: -280px;
    }
    
    /* Header adjustments */
    .chat-header {
        padding: 0.75rem;
    }
    
    .header-title {
        font-size: 1.1rem;
    }
    
    .header-subtitle {
        font-size: 0.8rem;
    }
    
    .session-info {
        font-size: 0.75rem;
        gap: 0.5rem;
    }
    
    /* Messages adjustments */
    .messages {
        padding: 0.75rem;
        gap: 0.75rem;
    }
    
    .message {
        max-width: 95%;
    }
    
    .message-content {
        font-size: 0.9rem;
        padding: 0.6rem 0.8rem;
    }
    
    .message-avatar {
        width: 28px;
        height: 28px;
        font-size: 0.7rem;
    }
    
    /* Input adjustments */
    .input-container {
        padding: 0.75rem;
    }
    
    .send-btn {
        width: 36px;
        height: 36px;
    }
    
    /* Modal adjustments */
    .memory-modal, 
    .all-memories-modal, 
    .config-modal, 
    .add-fields-modal {
        padding: 1rem;
    }
    
    .memory-modal-content, 
    .all-memories-content, 
    .config-content, 
    .add-fields-content {
        padding: 1.5rem;
    }
    
    .modal-title,
    .all-memories-title,
    .config-title,
    .add-fields-title {
        font-size: 1.25rem;
    }
    
    .modal-actions {
        flex-direction: column;
        gap: 0.75rem;
    }
    
    .modal-actions-left,
    .modal-actions-right {
        justify-content: center;
    }
    
    /* Memory grid adjustments */
    .memory-grid {
        grid-template-columns: 1fr;
    }
    
    .fields-grid {
        grid-template-columns: 1fr;
    }
    
    /* Choice dialog adjustments */
    .choice-option {
        flex-direction: column;
        text-align: center;
        gap: 0.75rem;
    }
    
    .choice-icon {
        width: 40px;
        height: 40px;
        font-size: 1.25rem;
    }
    
    /* Config options stack on mobile */
    .config-options {
        gap: 0.5rem;
    }
    
    /* Memory type filters wrap better */
    .memory-type-filters {
        gap: 0.25rem;
    }
    
    .filter-btn {
        font-size: 0.8rem;
        padding: 0.4rem 0.8rem;
    }
}

/* Small mobile styles */
@media (max-width: 480px) {
    /* Auth screen adjustments */
    .auth-screen {
        padding: 1rem;
    }
    
    .auth-card {
        padding: 1.5rem;
    }
    
    .auth-header h1 {
        font-size: 1.75rem;
    }
    
    .auth-header p {
        font-size: 0.9rem;
    }
    
    /* Alert positioning */
    #authAlert {
        top: 1rem;
        right: 1rem;
        left: 1rem;
        max-width: none;
    }
    
    /* Header further compressed */
    .chat-header {
        padding: 0.5rem;
    }
    
    .hamburger {
        font-size: 1.25rem;
        margin-right: 0.5rem;
    }
    
    .header-title {
        font-size: 1rem;
    }
    
    .session-info {
        flex-direction: column;
        gap: 0.25rem;
        align-items: flex-start;
    }
    
    /* Messages even more compact */
    .messages {
        padding: 0.5rem;
        gap: 0.5rem;
    }
    
    .message-content {
        font-size: 0.85rem;
        padding: 0.5rem 0.7rem;
    }
    
    /* Input more compact */
    .input-container {
        padding: 0.5rem;
    }
    
    .input-group {
        padding: 0.4rem 0.8rem;
    }
    
    .message-input {
        font-size: 0.9rem;
    }
    
    .send-btn {
        width: 32px;
        height: 32px;
        font-size: 0.9rem;
    }
    
    /* Sidebar width adjustment */
    .sidebar {
        width: 260px;
        left: -260px;
    }
    
    .sidebar-header {
        padding: 1.5rem 1rem;
    }
    
    .user-avatar {
        width: 40px;
        height: 40px;
        font-size: 1.25rem;
    }
    
    /* Modal further compressed */
    .memory-modal-content, 
    .all-memories-content, 
    .config-content, 
    .add-fields-content {
        padding: 1rem;
    }
    
    .modal-title,
    .all-memories-title,
    .config-title,
    .add-fields-title {
        font-size: 1.1rem;
    }
    
    /* Modal buttons stack */
    .modal-actions {
        flex-direction: column;
    }
    
    .modal-actions-left,
    .modal-actions-right {
        flex-direction: column;
    }
    
    /* Memory cards full width */
    .memory-card {
        padding: 0.75rem;
    }
    
    .memory-card-content {
        font-size: 0.85rem;
    }
    
    /* Choice dialog compressed */
    .choice-dialog {
        padding: 1rem;
    }
    
    .choice-dialog-content {
        padding: 1.5rem;
    }
    
    .choice-dialog-title {
        font-size: 1.1rem;
    }
    
    /* Config step titles smaller */
    .config-step-title {
        font-size: 1rem;
    }
    
    /* Memory confirmation compressed */
    .memory-confirmation-content {
        padding: 1.5rem;
    }
    
    .memory-confirmation-title {
        font-size: 1.2rem;
    }
}

/* Tablet styles */
@media (min-width: 769px) and (max-width: 1024px) {
    .sidebar {
        width: 320px;
        left: -320px;
    }
    
    .memory-grid {
        grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
    }
    
    .fields-grid {
        grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
    }
    
    .config-options {
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    }
}

/* Large desktop styles */
@media (min-width: 1200px) {
    .memory-grid {
        grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
    }
    
    .all-memories-content,
    .config-content {
        max-width: 1000px;
    }
    
    .memory-modal-content {
        max-width: 800px;
    }
}

/* Landscape phone styles */
@media (max-height: 500px) and (orientation: landscape) {
    .auth-screen {
        padding: 1rem;
    }
    
    .auth-card {
        max-width: 500px;
        padding: 1.5rem;
    }
    
    .auth-header h1 {
        font-size: 1.5rem;
        margin-bottom: 0.25rem;
    }
    
    .auth-header p {
        font-size: 0.85rem;
    }
    
    .auth-tabs {
        margin-bottom: 1rem;
    }
    
    .form-group {
        margin-bottom: 1rem;
    }
    
    /* Modal height adjustments for landscape */
    .memory-modal-content, 
    .all-memories-content, 
    .config-content {
        max-height: 90vh;
    }
    
    .add-fields-content {
        max-height: 80vh;
    }
}

/* High DPI screens */
@media (-webkit-min-device-pixel-ratio: 2), (min-resolution: 2dppx) {
    .message-avatar,
    .user-avatar,
    .choice-icon {
        border: 0.5px solid rgba(0, 0, 0, 0.1);
    }
}

/* Dark mode support */
@media (prefers-color-scheme: dark) {
    :root {
        --text-primary: #ffffff;
        --text-secondary: #cccccc;
        --bg-primary: #1a1a1a;
        --bg-secondary: #2d2d2d;
        --border-color: #404040;
    }
    
    /* Only apply if user hasn't explicitly set light mode */
    body:not(.light-mode) {
        background: var(--bg-primary);
        color: var(--text-primary);
    }
}

/* Reduced motion support */
@media (prefers-reduced-motion: reduce) {
    *,
    *::before,
    *::after {
        animation-duration: 0.01ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.01ms !important;
        scroll-behavior: auto !important;
    }
    
    .typing-dot {
        animation: none;
    }
    
    .online-indicator {
        animation: none;
    }
    
    .spinner {
        animation: none;
        border-top-color: transparent;
    }
}

/* Print styles */
@media print {
    .sidebar,
    .overlay,
    .input-container,
    .chat-header,
    .memory-modal,
    .all-memories-modal,
    .config-modal,
    .add-fields-modal,
    .confirm-dialog,
    .choice-dialog,
    .memory-confirmation-dialog {
        display: none !important;
    }
    
    .chat-app {
        height: auto;
    }
    
    .messages {
        padding: 0;
        overflow: visible;
    }
    
    .message {
        break-inside: avoid;
        max-width: 100%;
        margin-bottom: 1rem;
    }
    
    .message-content {
        box-shadow: none;
        border: 1px solid #ddd;
    }
}
